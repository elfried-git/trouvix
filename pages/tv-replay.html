<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TV / Replay - Trouvix</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <header>
      <div class="header-row">
          <div class="logo" tabindex="0" aria-label="Accueil Trouvix">
              <span class="logo-text">Trouvix</span>
          </div>
      <nav id="main-nav" class="main-nav" aria-label="Navigation principale">
        <ul>
          <li><a href="../index.html">Accueil</a></li>
          <li><a href="../index.html#contact">Contact</a></li>
          <li><a href="jeux-quiz.html">Jeux / Quiz</a></li>
          <li><a href="../page-apprentissage-langues/index.html">Apprentissage des Langues</a></li>
          <li><a href="tv-replay.html">TV / Replay</a></li>
          <li id="menu-user-icon" style="display:none">
            <a href="espace-membre.php" title="Espace membre" style="display:flex;align-items:center;gap:0.4em;">
              <span style="font-size:1.5em;">üë§</span>
              <span id="menu-user-nom" style="font-size:1em;">
                <?php session_start(); if(isset($_SESSION['user_nom'])) echo htmlspecialchars($_SESSION['user_nom']); ?>
              </span>
            </a>
          </li>
          <li id="menu-login-link"><a href="../auth/login.html">Connexion</a></li>
          <li id="menu-logout-link" style="display:none"><form action="logout.php" method="post" style="display:inline;"><button type="submit" style="background:none;border:none;color:#0ff1ce;font-size:1em;cursor:pointer;">D√©connexion</button></form></li>
        </ul>
      </nav>
      </div>
  </header>
  <script src="/Trouvix/js/session-nav.js"></script>
  <main>
    <h1 style="text-align: center;">TV / Replay</h1>
    <div class="card-container" style="display: flex; flex-direction: column; align-items: center;">
      <div class="tv-card" id="tv-card-main" style="text-align: center;">
        <h2>Liste des Cha√Ænes TV (M3U)</h2>
        <p>Cliquez ci-dessous pour t√©l√©charger ou ouvrir la liste de lecture (playlist) de cha√Ænes de t√©l√©vision au format M3U. Vous pourrez l'utiliser avec un lecteur compatible (VLC, Kodi, etc.).</p>
        <div id="tv-m3u-btn" style="cursor: pointer; display: block; width: 50vw; min-width: 300px; max-width: 600px; margin: 20px auto; padding: 30px 20px; background: #f5f5f5; border-radius: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); text-align: center; transition: box-shadow 0.2s;">
          <div style="display: flex; flex-direction: column; align-items: center;">
            <img src="/img/m3u-icon.png" alt="M3U Playlist" style="width: 64px; height: 64px; margin-bottom: 16px;">
            <span style="font-size: 1.5em; font-weight: bold;">TV / REPLAY</span>
            <span style="margin-top: 8px; color: #666;">Cliquez ici pour obtenir la liste des cha√Ænes TV</span>
          </div>
        </div>
      </div>
    </div>
    <p style="text-align: center;">Page en construction.</p>
  </main>
  <script>
  // Masque la carte TV tant que non connect√©, affiche popin si clic
  document.addEventListener('DOMContentLoaded', function() {
    const isConnected = sessionStorage.getItem('user_nom');
    const tvCard = document.getElementById('tv-card-main');
    const tvBtn = document.getElementById('tv-m3u-btn');
    if (!isConnected) {
      if (tvCard) tvCard.style.opacity = '0.5';
      if (tvBtn) {
        tvBtn.addEventListener('click', function(e) {
          e.preventDefault();
          showAccessDeniedPopinTV();
        });
        tvBtn.style.pointerEvents = 'auto';
        tvBtn.style.cursor = 'not-allowed';
      }
    } else {
      if (tvBtn) {
        tvBtn.addEventListener('click', function() {
          window.location.href = 'lien-vers-votre-fichier.m3u';
        });
        tvBtn.style.cursor = 'pointer';
      }
    }
  });
  // Popin styl√© pour acc√®s refus√© TV
  function showAccessDeniedPopinTV() {
    if (document.getElementById('popin-access-denied-overlay')) return;
    const html = `\
      <div id=\"popin-access-denied-overlay\">\
        <div id=\"popin-access-denied\">\
          <div id=\"popin-access-denied-title\">Acc√®s TV / Replay refus√©</div>\
          <div id=\"popin-access-denied-msg\">Vous devez √™tre connect√©(e) pour acc√©der √† la TV / Replay.</div>\
          <button id=\"popin-access-denied-btn\">OK</button>\
        </div>\
      </div>`;
    document.body.insertAdjacentHTML('beforeend', html);
    document.getElementById('popin-access-denied-btn').onclick = function() {
      const overlay = document.getElementById('popin-access-denied-overlay');
      if (overlay) overlay.remove();
    };
    document.getElementById('popin-access-denied-overlay').addEventListener('click', function(e) {
      if (e.target === this) this.remove();
    });
  }
  </script>
  <style>
  #popin-access-denied-overlay {
    position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
    background: rgba(10,16,40,0.85); z-index: 2000; display: flex; align-items: center; justify-content: center;
  }
  #popin-access-denied {
    background: #181c3a; padding: 2.2em 2.5em 2em 2.5em; border-radius: 1.2em;
    box-shadow: 0 0 32px #00fff966, 0 0 0 2px #00fff933; text-align: center; max-width: 90vw;
    animation: popinIn 0.3s cubic-bezier(.4,2,.6,1) both;
  }
  #popin-access-denied-title {
    font-size: 1.3em; color: #00fff9; font-weight: bold; margin-bottom: 1.2em;
    letter-spacing: 0.03em; text-shadow: 0 0 8px #00fff9, 0 0 24px #00fff9;
  }
  #popin-access-denied-msg {
    color: #fff; font-size: 1.08em; margin-bottom: 2em;
  }
  #popin-access-denied-btn {
    background: linear-gradient(90deg,#00fff9 60%,#ff00ff 100%); color: #181c3a;
    border: none; border-radius: 0.7em; font-size: 1.1em; font-weight: bold;
    padding: 0.6em 2.2em; cursor: pointer; box-shadow: 0 0 12px #00fff966;
    transition: background 0.2s, color 0.2s;
  }
  @keyframes popinIn {
    0% { transform: scale(0.8); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
  }
  </style>
  <script src="/js/script.js"></script>
</body>
</html>